# 中医院管理系统功能文档

## 项目简介

这个项目是中医院管理系统，前后端分离开发。后端用Spring Boot + PostgreSQL，前端用Vue.js。主要功能包括基本的患者、医生、就诊记录管理，还有中医特色的诊断图片处理，以及患者自诊功能。

## 后端功能

### 基础数据管理
- **患者管理**：增删改查患者信息，支持身份证号和手机号查询
- **医生管理**：医生档案维护，按执业资格证号查询
- **就诊记录**：记录患者就诊情况，关联医生和患者
- **处方管理**：中药处方管理，包含药材明细
- **药品库存**：管理药品出入库
- **病史记录**：患者既往病史跟踪
- **随访记录**：治疗后跟踪管理

### 中医特色功能
- **诊断图片上传**：支持舌象、面象、脉象等图片上传
- **图片处理**：自动转成PNG格式，超过512×512的图片会自动裁剪
- **图片关联**：图片与就诊记录绑定

### API接口
主要接口包括：
- `/api/patients` - 患者相关操作
- `/api/doctors` - 医生相关操作
- `/api/visits` - 就诊记录相关操作
- `/api/diagnostic-images` - 诊断图片相关操作

## 前端功能

前端是Vue.js 2.0项目，主要页面有：

### 管理页面
- 仪表板：显示统计数据和近期记录
- 患者管理：患者信息的CRUD操作
- 医生管理：医生信息维护
- 就诊记录：查看和编辑就诊历史
- 处方管理：中药处方管理
- 诊断图片：管理上传的图片

### 患者自诊功能
这是系统特色功能，患者自己填症状。流程大概是：
1. 问姓名、性别、年龄、主诉
2. 按中医问诊顺序问症状（全身症状、呼吸系统、消化系统等）
3. 上传舌象图片
4. 补充其他症状
5. 保存数据到系统

前端用了Bootstrap做界面，交互比较直观，就像跟医生对话一样。

## 技术架构

### 后端
- Spring Boot 3.2 + Spring Cloud
- PostgreSQL做数据存储
- JPA做数据访问
- 用雪花算法生成ID
- Docker部署

### 前端
- Vue.js 2.0 + Vue Router
- Bootstrap 4 + Font Awesome
- Axios做HTTP请求
- 用http-server跑前端

## 部署

### 本地开发
后端：`mvn spring-boot:run`
前端：`npm run dev`（在tcm-frontend目录下）

### Docker部署
用docker-compose.yml，包含PostgreSQL、Java服务和Rust服务（预留）。

端口：
- 前端：58080
- 后端：58081

## 代码结构

### 后端src/main/java/com/tcm/
- api: 控制器
- model: 实体类
- repository: 数据访问
- service: 业务逻辑
- config: 配置
- dto: 数据传输对象
- utils: 工具类

### 前端tcm-frontend/
- public: 静态文件
- src: 源代码（其实前端代码直接放在public/js/app.js里了）
- js/app.js: 主要前端逻辑，包括所有组件和路由

## 患者自诊实现

这个功能在SelfDiagnosis组件里实现。用户在前端按提示回答症状，系统会逐步收集成对的患者信息和症状。关键点：
- 用聊天界面模拟医患交流
- 逐步收集信息（基本信息→症状→图片→其他）
- 最后把数据存到数据库对应的patient和visit表里

## AI集成
-后端以约定好的json格式把数据库中诊断所需要的临床表现发送给lora微调后的qwen大模型，实现了诊断的智能化。


## 项目特点

- 针对中医业务设计
- 有图片处理功能
- 患者可以自助录入症状
- 前后端分离，部署灵活
- 代码结构比较清晰，容易扩展新功能
